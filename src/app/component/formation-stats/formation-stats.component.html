<app-navbar></app-navbar>


<div class="page-wrapper">

  <!-- Page Content-->
  <div class="page-content">
    <div class="container-xxl">


        formation general stats
        <div class="row">
          <div class="col-md-12 col-lg-5">
            <div class="card">
              <div class="card-header">
                <div class="row align-items-center">
                  <div class="col">
                    <h4 class="card-title">Customers Data</h4>
                  </div><!--end col-->
                  <div class="col-auto">
                    <div class="dropdown">
                      <a href="#" class="btn bt btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icofont-calendar fs-5 me-1"></i> This Year<i class="las la-angle-down ms-1"></i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-end">
                        <a class="dropdown-item" href="#">Today</a>
                        <a class="dropdown-item" href="#">Last Week</a>
                        <a class="dropdown-item" href="#">Last Month</a>
                        <a class="dropdown-item" href="#">This Year</a>
                      </div>
                    </div>
                  </div><!--end col-->
                </div>  <!--end row-->
              </div><!--end card-header-->
              <div class="card-body pt-0">
                <div class="row g-3">
                  <div class="col-md-6 col-lg-6">
                    <div class="card shadow-none border mb-3 mb-lg-0">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col text-center">
                            <span class="fs-18 fw-semibold">{{formationStats?.TotalIncome}}</span>
                            <h6 class="text-uppercase text-muted mt-2 m-0">Total Customers</h6>
                          </div><!--end col-->
                        </div> <!-- end row -->
                      </div><!--end card-body-->
                    </div> <!--end card-body-->
                  </div><!--end col-->
                  <div class="col-md-6 col-lg-6">
                    <div class="card shadow-none border mb-3 mb-lg-0">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col text-center">
                            <span class="fs-18 fw-semibold">{{formationStats?.totoalNumberOFsTUDENTS}}</span>
                            <h6 class="text-uppercase text-muted mt-2 m-0">New Customers</h6>
                          </div><!--end col-->
                        </div> <!-- end row -->
                      </div><!--end card-body-->
                    </div> <!--end card-body-->
                  </div><!--end col-->

                  <div class="col-md-6 col-lg-6">
                    <div class="card shadow-none border mb-3 mb-lg-0">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col text-center">
                            <span class="fs-18 fw-semibold">70.8%</span>
                            <h6 class="text-uppercase text-muted mt-2 m-0">Returning Customers</h6>
                          </div><!--end col-->
                        </div> <!-- end row -->
                      </div><!--end card-body-->
                    </div> <!--end card-->
                  </div><!--end col-->
                  <div class="col-md-6 col-lg-6">
                    <div class="card shadow-none border mb-3 mb-lg-0">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col text-center">
                            <span class="fs-18 fw-semibold">1.5%</span>
                            <h6 class="text-uppercase text-muted mt-2 m-0">Bounce Rate</h6>
                          </div><!--end col-->
                        </div> <!-- end row -->
                      </div><!--end card-body-->
                    </div> <!--end card-body-->
                  </div><!--end col-->
                </div><!--end row-->
              </div><!--end card-body-->
            </div><!--end card-->
          </div> <!--end col-->
          <div class="col-md-12 col-lg-7">
            <div class="card">
              <div class="card-header">
                <div class="row align-items-center">
                  <div class="col">
                    <h4 class="card-title">Customers Growth</h4>
                  </div><!--end col-->
                  <div class="col-auto">
                    <div class="dropdown">
                      <a href="#" class="btn bt btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icofont-calendar fs-5 me-1"></i> This Year<i class="las la-angle-down ms-1"></i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-end">
                        <a class="dropdown-item" href="#">Today</a>
                        <a class="dropdown-item" href="#">Last Week</a>
                        <a class="dropdown-item" href="#">Last Month</a>
                        <a class="dropdown-item" href="#">This Year</a>
                      </div>
                    </div>
                  </div><!--end col-->
                </div>  <!--end row-->
              </div><!--end card-header-->
              <div class="card-body pt-0">
                <div id="customers-line" class="apex-charts"></div>
              </div><!--end card-body-->
            </div><!--end card-->
          </div> <!--end col-->
        </div><!--end row-->

      <div class="row">
        <ng-container *ngFor="let formationactive of formationsActive">
          <div class="col-md-6 col-lg-4">
            <div class="card">
              <div class="card-body">
                <div class="position-absolute  end-0 me-3">
                  <span class="badge rounded text-success bg-transparent border border-primary ms-1 p-1">In Progress</span>
                </div>
                <div class="text-center border-dashed-bottom pb-3">
                  <img src="assets/images/solidworks.jpg" alt="" height="80" class="rounded-circle d-inline-block">
                  <h5 class="fw-bold my-2 fs-20">{{formationactive.formationName}}</h5>
                  <p class="text-dark  fs-13 fw-semibold"><span class="text-muted">Formateur : </span>{{formationactive.formerName}}</p>
                  <div class="d-flex justify-content-between fw-semibold align-items-center">
                    <p class="mb-1 d-inline-flex align-items-center"><i class="iconoir-task-list fs-18 text-muted me-1"></i>{{formationactive.numberOfStudent}} etudiant</p>
                    <small class="text-end text-body-emphasis d-block ms-auto">70%</small>
                  </div>

                  <!--
                  <div class="progress bg-secondary-subtle" style="height:5px;">
                    <div class="progress-bar bg-secondary rounded-pill" role="progressbar" style="margin-right:2px; width: 15% " aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                    <div class="progress-bar bg-secondary rounded-pill" role="progressbar" style="margin-right:2px; width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                    <div class="progress-bar bg-secondary rounded-pill" role="progressbar" style="margin-right:2px; width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                  -->

                  <div class="row mt-3 align-items-center">
                    <div class="col-auto col-md-6">
                      <div class="text-start">
                        <h5 class="fs-18 fw-semibold mb-1"><span class="text-muted fw-normal">revenu total: </span>{{formationactive.totalIncome}}dt</h5>
                        <h5 class="fs-18 fw-semibold mb-0"><span class="text-muted fw-normal">rester Ã  payer: </span>{{formationactive.restToPay}}dt</h5>

                      </div>
                    </div>
                    <div class="col col-md-6 text-end align-self-center">
                      <h6 class="fw-normal text-muted">Start : <span class="text-dark fw-semibold">{{formationactive.startAt}}</span></h6>
                      <h6 class="fw-normal text-muted">Deadline : <span class="text-dark fw-semibold">{{formationactive.endAt}}</span></h6>
                    </div><!--end col-->
                  </div> <!--end row-->

                  <p  *ngIf="formationactive.description" class="text-muted mt-3 mb-0">NB:{{formationactive.description}}</p>
                </div>

                <div class="d-flex justify-content-between fw-semibold align-items-center  mt-3">
                  <!--
                  <div class="img-group d-flex justify-content-center">
                    <a class="user-avatar position-relative d-inline-block" href="#">
                      <img src="assets/images/users/avatar-1.jpg" alt="avatar" class="thumb-md shadow-sm rounded-circle">
                    </a>
                    <a class="user-avatar position-relative d-inline-block ms-n2" href="#">
                      <img src="assets/images/users/avatar-4.jpg" alt="avatar" class="thumb-md shadow-sm rounded-circle">
                    </a>
                    <a class="user-avatar position-relative d-inline-block ms-n2" href="#">
                      <img src="assets/images/users/avatar-6.jpg" alt="avatar" class="thumb-md shadow-sm rounded-circle">
                    </a>
                    <a href="#" class="user-avatar position-relative d-inline-block ms-1">
                      <span class="thumb-md shadow-sm justify-content-center d-flex align-items-center bg-info-subtle rounded-circle fw-semibold fs-6">+6</span>
                    </a>
                  </div>-->
                  <button type="button" class="btn bg-secondary-subtle text-dark btn-sm px-3" (click)="formationDetail(formationactive.id??0)" >Details</button>
                </div>
              </div><!--end card-body-->
            </div><!--end card-->
          </div> <!--end col-->

        </ng-container>


      </div><!--end row-->

      <div class="row">

            <div class="card">
              <div class="card-header">
                <div class="row align-items-center">
                  <div class="col">
                    <h4 class="card-title">Formation List</h4>
                  </div><!--end col-->
                </div>  <!--end row-->
              </div><!--end card-header-->
              <div class="card-body pt-0">
                <div class="search-hero">
                  <input class="form-control" type="text" name="search"  autocomplete="off"      placeholder=" search student by Email" #filter>
                  <i class="material-icons icon-pointer" (click)="filterResults(filter.value)">search</i>
                </div>
                <div class="table-responsive">
                  <table class="table  mb-0 table-centered">
                    <thead class="table-light">
                    <tr>
                      <th>Nom de formation</th>
                      <th>Nom de formateur</th>
                      <th>Nombre d'Ã©tudiants</th>
                      <th>Revenu total</th>
                      <th>Date de debut</th>
                      <th>Date de fin</th>
                     <!-- <th class="text-end">Action</th>-->
                    </tr>
                    </thead>
                    <tbody>
                    <ng-container *ngFor="let formation of filtreFormation">
                    <tr>
                      <!--
                      <td><img src="assets/images/logos/lang-logo/chatgpt.png" alt="" class="rounded-circle thumb-md me-1 d-inline">
                        Micromin
                      </td>-->
                      <td>{{formation.formationName}}</td>
                      <td>{{formation.formerName}}</td>
                      <td>{{formation.numberOfStudent}}</td>
                      <td>{{formation.totalIncome}}</td>
                      <td>{{formation.startAt}}</td>
                      <td>{{formation.endAt}}</td>
                  <!---    <td class="text-end">
                        <div class="dropdown d-inline-block">
                          <a class="dropdown-toggle arrow-none" id="dLabel112" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                            <i class="las la-ellipsis-v fs-20 text-muted"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dLabel112">
                            <a class="dropdown-item" href="#">Creat Project</a>
                            <a class="dropdown-item" href="#">Open Project</a>
                            <a class="dropdown-item" href="#">Tasks Details</a>
                          </div>
                        </div>
                      </td>
                    </tr>-->
                    </ng-container>
                    </tbody>
                  </table><!--end /table-->
                </div><!--end /tableresponsive-->
              </div><!--end card-body-->
            </div><!--end card-->

    </div><!-- table -->

    <!--Start Rightbar-->
    <!--Start Rightbar/offcanvas-->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="Appearance" aria-labelledby="AppearanceLabel">
      <div class="offcanvas-header border-bottom justify-content-between">
        <h5 class="m-0 font-14" id="AppearanceLabel">Appearance</h5>
        <button type="button" class="btn-close text-reset p-0 m-0 align-self-center" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <h6>Account Settings</h6>
        <div class="p-2 text-start mt-3">
          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="settings-switch1">
            <label class="form-check-label" for="settings-switch1">Auto updates</label>
          </div><!--end form-switch-->
          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="settings-switch2" checked>
            <label class="form-check-label" for="settings-switch2">Location Permission</label>
          </div><!--end form-switch-->
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="settings-switch3">
            <label class="form-check-label" for="settings-switch3">Show offline Contacts</label>
          </div><!--end form-switch-->
        </div><!--end /div-->
        <h6>General Settings</h6>
        <div class="p-2 text-start mt-3">
          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="settings-switch4">
            <label class="form-check-label" for="settings-switch4">Show me Online</label>
          </div><!--end form-switch-->
          <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="settings-switch5" checked>
            <label class="form-check-label" for="settings-switch5">Status visible to all</label>
          </div><!--end form-switch-->
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="settings-switch6">
            <label class="form-check-label" for="settings-switch6">Notifications Popup</label>
          </div><!--end form-switch-->
        </div><!--end /div-->
      </div><!--end offcanvas-body-->
    </div>
    <!--end Rightbar/offcanvas-->
    <!--end Rightbar-->
    <!--Start Footer-->



    <!--end footer-->
  </div>
  <!-- end page content -->
</div>
</div>
